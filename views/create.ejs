<html lang="en">
  <style>
    .btn {
      white-space: nowrap;
      text-align: center;
    }
  </style>
  <%- include('./partials/head.ejs') %>
  <body>
    <%- include('./partials/nav.ejs') %>
    <div
      class="container d-flex align-items-center justify-content-center"
      style="height: 70vh"
    >
      <form
        action="/mainpage/<%= typeof edit!='undefined'?("create/"+task._id):""%>"
        method="POST"
      >
        <div class="my-2">
          <label for="date_deadline">Deadline Date</label>
          <input
            id="date_deadline"
            name="date_deadline"
            class="form-control"
            type="date"
            required
          />
        </div>
        <div class="my-2">
          <label for="time_deadline">Select a specific time:</label>
          <input
            class="form-control"
            name="time_deadline"
            type="time"
            id="time_deadline"
          />
        </div>
        <div class="form-group">
          <label for="task">Task</label>
          <input
            type="Task"
            class="form-control"
            id="InputTask"
            placeholder="Task"
            name="task"
            required
          />
        </div>
        <label for="InputPriority">Priority</label>
        <div class="my-2">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="priority"
              id="priority1"
              value="1"
              required
            />
            <label class="form-check-label" for="inlineRadio1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="priority"
              id="priority2"
              value="2"
              required
            />
            <label class="form-check-label" for="inlineRadio2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="priority"
              id="priority3"
              value="3"
              required
            />
            <label class="form-check-label" for="inlineRadio3">3</label>
          </div>
        </div>

        <div class="form-group my-2">
          <label for="InputNote">Note</label>
          <input
            type="Note"
            class="form-control"
            id="InputNote"
            placeholder="Note"
            name="note"
          />
        </div>
        <button type="addtask" class="btn btn-primary my-2">
          <%= typeof edit!='undefined'?"Edit":"Add task" %>
        </button>
      </form>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script type="text/javascript">
      if("<%= JSON.stringify(typeof edit!='undefined'?edit:false) %>"){
        const date_deadline = "<%= JSON.stringify(task.date_deadline) %>".slice(
          5,
          -5
        );
        const time_deadline = "<%= JSON.stringify(task.time_deadline) %>".slice(
          5,
          -5
        );
        const task = "<%= JSON.stringify(task.task) %>".slice(5, -5);
        const note = "<%= JSON.stringify(task.note) %>".slice(5, -5);
        const priority = "<%= JSON.stringify(task.priority) %>";

        if ("<%= JSON.stringify(typeof edit!='undefined'?edit:false) %>") {
          document.getElementById("date_deadline").value = date_deadline;
          document.getElementById("time_deadline").value = time_deadline;
          document.getElementById("InputTask").value = task;
          document.getElementById("InputNote").value = note;
          document.getElementById("priority" + priority).checked = true;
      }}
    </script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
      integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
